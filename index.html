<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width-device-width">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</head>
<body style="background-color:#F8F6E3;margin: 0;padding:0;">
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
        import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCdKiZZi0xVYXvifNW-A6PjtNu1Qs7lZJQ",
    authDomain: "power-monitor-usa.firebaseapp.com",
    databaseURL: "https://power-monitor-usa-default-rtdb.firebaseio.com",
    projectId: "power-monitor-usa",
    storageBucket: "power-monitor-usa.appspot.com",
    messagingSenderId: "882581774089",
    appId: "1:882581774089:web:4ba4c49aa0b3d4d5e47dd8",
    measurementId: "G-BBVFYRQFBN"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase();

        function fetchDataFromFirebase() {
            const dbRef = ref(db);

            get(dbRef).then((snapshot) => {
        const data = snapshot.val();
        let CurrentA = data.CurrentA;
         let CurrentB = data.CurrentB;
         let EBORGEN = data.EBORGEN;
         let EnergyA = data.EnergyA;
         let EnergyB = data.EnergyB;
         let FrequencyA = data.FrequencyA;
         let FrequencyB = data.FrequencyB;
         let LoadA = data.LoadA;
         let LoadAStatus = data.LoadAStatus;
         let LoadB = data.LoadB;
         let LoadBStatus = data.LoadBStatus;
         let PFA = data.PFA;
         let PFB = data.PFB;
         let PowerA = data.PowerA;
         let PowerB = data.PowerB;
         let ResonH = data.ResonH;
         let ResonS = data.ResonS;
         let VoltageA = data.VoltageA;
         let VoltageB = data.VoltageB;
         let currentMax = data.currentMax;
         let currentMin = data.currentMin;
         let mode = data.mode;
         let time = data.time;
         let voltageMax = data.voltageMax;
         let voltageMin = data.voltageMin;
         document.getElementById("voltageA").innerHTML=VoltageA+"V"
         document.getElementById("currentA").innerHTML=CurrentA+"A"
         document.getElementById("powerA").innerHTML=PowerA+"W"
         document.getElementById("frequencyA").innerHTML=FrequencyA+"Hz"
         document.getElementById("energyA").innerHTML=EnergyA+"kWh"
         document.getElementById("voltageB").innerHTML=VoltageB+"V"
         document.getElementById("currentB").innerHTML=CurrentB+"A"
         document.getElementById("powerB").innerHTML=PowerB+"W"
         document.getElementById("frequencyB").innerHTML=FrequencyB+"Hz"
         document.getElementById("energyB").innerHTML=EnergyB+"kWh"
         document.getElementById("pfA").innerHTML=PFA
         document.getElementById('lsA').innerHTML=LoadAStatus
         document.getElementById("rsA").innerHTML=ResonS
         document.getElementById("rsB").innerHTML=ResonH
         document.getElementById("pfB").innerHTML=PFB
         document.getElementById('lsB').innerHTML=LoadBStatus
         document.getElementById("pfA").innerHTML=PFA
         document.getElementById('currentInput').innerHTML=EBORGEN
         document.getElementById('time').innerHTML=time
         document.getElementById('time').style.float="left"



            }).catch((error) => {
                console.error("Error fetching data:", error);
            });
        }
        window.addEventListener('load', fetchDataFromFirebase);
    </script> 
   <h1 class="text-center bg-black text-light p-4">Smart Energy Management System with Priority Control</h1>
   <div class="container text-center mb-5">
   <div class="row mt-5">
    <div class="col p-0 rounded  bg-white text-dark border border-2 me-3">
        <h2>Load 1</h2>
        <div class="row justify-content-center">
            <div class="col-auto ">
                <p class="fs-5">Voltage:</p>
            </div>
            <div class="col-auto">
                <p class="fs-5"id="voltageA"></p>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-auto">
                <p class="fs-5">Current:</p>
            </div>
            <div class="col-auto">
                <p class="fs-5"id="currentA"></p>
            </div>
        </div>
        <div class="row  justify-content-center">
            <div class="col-auto">
                <p class="fs-5">Power:</p>
            </div>
            <div class="col-auto">
                <p class="fs-5  "id="powerA"></p>
            </div>
        </div>
        <div class="row  justify-content-center">
            <div class="col-auto">
                <p class="fs-5">Frequency:</p>
            </div>
            <div class="col-auto">
                <p class="fs-5  "id="frequencyA"></p>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-auto">
                <p class="fs-5">Energy:</p>
            </div>
            <div class="col-auto">
                <p class="fs-5"id="energyA"></p>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-auto">
                <p class="fs-5">Power Factor:</p>
            </div>
            <div class="col-auto">
                <p class="fs-5"id="pfA"></p>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-auto">
                <p class="fs-5">Load Status:</p>
            </div>
            <div class="col-auto">
                <p class="fs-5"id="lsA"></p>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-auto">
                <p class="fs-5">Reason Status:</p>
            </div>
            <div class="col-auto">
                <p class="fs-5"id="rsA"></p>
            </div>
        </div>
   </div>

    <div class="col  rounded  bg-white text-dark border border-2 ">
        <h2>Load 2</h2>
        <div class="row justify-content-center">
            <div class="col-auto">
                <p class="fs-5">Voltage:</p>
            </div>
            <div class="col-auto">
                <p class="fs-5  "id="voltageB"></p>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-auto">
                <p class="fs-5">Current:</p>
            </div>
            <div class="col-auto">
                <p class="fs-5  "id="currentB"></p>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-auto">
                <p class="fs-5">Power:</p>
            </div>
            <div class="col-auto">
                <p class="fs-5  "id="powerB"></p>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-auto">
                <p class="fs-5">Frequency:</p>
            </div>
            <div class="col-auto">
                <p class="fs-5  "id="frequencyB"></p>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-auto">
                <p class="fs-5">Energy:</p>
            </div>
            <div class="col-auto">
                <p class="fs-5  "id="energyB"></p>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-auto">
                <p class="fs-5">Power Factor:</p>
            </div>
            <div class="col-auto">
                <p class="fs-5  "id="pfB"></p>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-auto">
                <p class="fs-5">Load Status:</p>
            </div>
            <div class="col-auto">
                <p class="fs-5  "id="lsB"></p>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-auto">
                <p class="fs-5">Reason Status:</p>
            </div>
            <div class="col-auto">
                <p class="fs-5  "id="rsB"></p>
            </div>
        </div>
        </div>
    </div>
    <div class="row justify-content-center mt-5  bg-white text-dark rounded-pill" style="width:300px; height: 40px;margin-left: 39%;" >
        <div class="col-auto">
       <p class="fs-5">Current Input:</p>
        </div>
        <div class="col-auto">
            <p class="fs-5" id="currentInput"></p>
        </div>
       </div>
   </div>
   <div class="container mt-5 text-center">
    <div class="row mt-4 justify-content-center  bg-white text-dark rounded-pill mb-5" style="width:300px; height: 40px;margin-left: 39%;">
        <div class="col-auto">
    <p class="fs-5">Updated:</p>
        </div>
        <div class="col-auto">
            <p class="fs-5 float-start" id="time"></p>
        </div>
    </div>
  
    <a href="https://thingspeak.com/channels/2454499" target="_blank" class="al">ThinkSpeak</a>
   </div>
</body>
</html>